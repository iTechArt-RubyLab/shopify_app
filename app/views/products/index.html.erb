<h1>All Products</h1>

<table>
  <tr>
    <th>Title</th>
    <th>Description</th>
    <th>Status</th>
    <th>Vendor</th>
    <th>Average price</th>
  </tr>
 <% @products.preload(:product_variants).each do |product| %>
    <tr>
      <td><%= link_to product.title, product_path(product) %></td>
      <td><%= product.body_html %></td>
      <td><%= product.status %></td>
      <td><%= product.vendor %></td>
      <td><%= product.product_variants.average(:price).to_f %></td>
    </tr>
  <% end %>
</table>